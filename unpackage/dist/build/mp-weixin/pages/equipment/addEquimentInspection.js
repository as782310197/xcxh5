(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/equipment/addEquimentInspection"],{"56c8":function(t,e,n){"use strict";(function(t){n("4d6d");i(n("66fd"));var e=i(n("b0b3"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"6a8b":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("4515"),o=n("1b75"),a={data:function(){return{id:"",deviceType:"",model:"",dateTime:(0,i.formatDate)(new Date),address:"",mechanicsImgSrc1:"",mechanicsImgSrc2:"",workSiteImgSrc1:"",workSiteImgSrc2:"",params:{appId:"",nonceStr:"",signature:"",timestamp:"",url:""},loadingMechanicsImgSrc1:!1,loadingMechanicsImgSrc2:!1,loadingWorkSiteImgSrc1:!1,loadingWorkSiteImgSrc2:!1}},computed:{submitDisabled:function(){return""!==this.address&&""!==this.mechanicsImgSrc1&&""!==this.mechanicsImgSrc2&&""!==this.workSiteImgSrc1&&""!==this.workSiteImgSrc2}},onLoad:function(t){this.deviceType=t.deviceType?t.deviceType:"",this.model=t.model?t.model:"",this.id=t.id,this.getParams()},methods:{getParams:function(){var t=this;console.log(location.href.split("#")[0]),this.http({url:"/api/wx/getSign",method:"post",data:{url:location.href.split("#")[0]}}).then((function(e){1===e.data.code?(t.params=e.data.result,t.getLocation()):console.log("获取配置参数失败")}))},getLocation:function(){var e=this;o.config({debug:!1,appId:this.params.appId,timestamp:this.params.timestamp,nonceStr:this.params.nonceStr,signature:this.params.signature,jsApiList:["getLocation"]}),o.ready((function(){o.checkJsApi({jsApiList:["getLocation"],success:function(t){0!=t.checkResult.getLocation||alert("你的微信版本太低，不支持微信JS接口，请升级到最新的微信版本！")}}),o.error((function(t){console.log("接口调取失败")})),o.getLocation({type:"gcj02",success:function(n){e.http({url:"/api/common/regeo",method:"post",data:{lng:n.longitude,lat:n.latitude}}).then((function(n){1===n.data.code?e.address=n.data.result:t.showToast({title:"当前经纬度解析失败",icon:"none",duration:2e3})}))},cancel:function(t){alert("您已禁止获取位置信息")}})}))},uploadMechanicsImg1:function(){var t=this;(0,i.uploadFile)().then((function(e){if(t.loadingMechanicsImgSrc1)return!1;200==e.statusCode&&(t.mechanicsImgSrc1=JSON.parse(e.data).url,t.loadingMechanicsImgSrc1=!0)}))},uploadMechanicsImg2:function(){var t=this;if(this.loadingMechanicsImgSrc2sss)return!1;(0,i.uploadFile)().then((function(e){200==e.statusCode&&(t.mechanicsImgSrc2=JSON.parse(e.data).url,t.loadingMechanicsImgSrc2=!0)}))},uploadWorkSiteImg1:function(){var t=this;(0,i.uploadFile)().then((function(e){if(t.loadingWorkSiteImgSrc1)return!1;200==e.statusCode&&(t.workSiteImgSrc1=JSON.parse(e.data).url,t.loadingWorkSiteImgSrc1=!0)}))},uploadWorkSiteImg2:function(){var t=this;(0,i.uploadFile)().then((function(e){if(t.loadingWorkSiteImgSrc2)return!1;200==e.statusCode&&(t.workSiteImgSrc2=JSON.parse(e.data).url,t.loadingWorkSiteImgSrc2=!0)}))},handleSubmit:function(){var e=this,n=this.$data,i=n.id,o=n.dateTime,a=n.address,c=n.mechanicsImgSrc1,r=n.mechanicsImgSrc2,s=n.workSiteImgSrc1,u=n.workSiteImgSrc2;this.http({url:"/api/bizDeviceRequirement/importInspectionRecord",method:"post",data:{requirementId:i,recordDate:o,recordLocate:a,photo1:c,photo2:r,photo3:s,photo4:u}}).then((function(n){1===n.data.code?(t.showToast({title:n.data.result+"，页面跳转中",icon:"none",duration:2e3}),setTimeout((function(){t.navigateTo({url:"/pages/equipment/equimentInspection?id="+e.id})}),2e3)):t.showToast({title:n.data.message,icon:"none",duration:2e3})}))},loadOver:function(){console.log("上传完毕")}}};e.default=a}).call(this,n("543d")["default"])},9083:function(t,e,n){"use strict";var i=n("e236"),o=n.n(i);o.a},a32e:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(n.bind(null,"6d48"))}},o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.loadingMechanicsImgSrc1=!1},t.e1=function(e){t.loadingMechanicsImgSrc2=!1},t.e2=function(e){t.loadingWorkSiteImgSrc1=!1},t.e3=function(e){t.loadingWorkSiteImgSrc2=!1})},a=[]},b0b3:function(t,e,n){"use strict";n.r(e);var i=n("a32e"),o=n("c0df");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("9083");var c,r=n("f0c5"),s=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"5e7a045a",null,!1,i["a"],c);e["default"]=s.exports},c0df:function(t,e,n){"use strict";n.r(e);var i=n("6a8b"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},e236:function(t,e,n){}},[["56c8","common/runtime","common/vendor"]]]);